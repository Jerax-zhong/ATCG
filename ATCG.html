<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>酵母菌呼吸产物检测模拟</title>
  <style>
    :root {
      --bg-color: #f8fafc;
      --card-bg: #ffffff;
      --primary: #2563eb;
      --text-main: #1e293b;
      --text-sub: #64748b;
      
      /* 橙色 (保持不变) */
      --c-orange: #fed7aa;
      --c-orange-d: #f97316;

      /* 颜色回调：严格按照您提供的第一个文件的颜色 */
      /* 明显灰绿色 */
      --c-green-strong-top: #9caea1; 
      --c-green-strong-bottom: #4b8262;
      
      /* 浅灰绿色 */
      --c-green-weak-top: #d1ddcf;
      --c-green-weak-bottom: #9fb7a0;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      -webkit-tap-highlight-color: transparent;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }

    body {
      background: var(--bg-color);
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
      color: var(--text-main);
    }

    /* 顶部导航与状态提示 */
    header {
      width: 100%;
      max-width: 800px;
      text-align: center;
      margin-bottom: 20px;
    }

    h1 {
      font-size: 1.5rem;
      margin-bottom: 15px;
      font-weight: 700;
    }

    .status-bar {
      display: inline-block;
      background: #e2e8f0;
      color: var(--text-sub);
      padding: 10px 24px;
      border-radius: 99px;
      font-size: 0.95rem;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }

    .status-bar.active {
      background: #dbeafe;
      color: #1d4ed8;
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.25);
      transform: scale(1.05);
    }

    /* 摇晃动画 class */
    .shake {
      animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both;
    }

    @keyframes shake {
      10%, 90% { transform: translate3d(-1px, 0, 0); }
      20%, 80% { transform: translate3d(2px, 0, 0); }
      30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
      40%, 60% { transform: translate3d(4px, 0, 0); }
    }

    /* 主容器 */
    .lab-bench {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      width: 100%;
      max-width: 900px;
      background: var(--card-bg);
      padding: 40px;
      border-radius: 24px;
      box-shadow: 0 10px 30px -5px rgba(0,0,0,0.08);
    }

    /* 实验组卡片 */
    .group {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 10px;
    }

    .group-title {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 20px;
      color: var(--text-sub);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .badge {
      background: #cbd5e1;
      color: #334155;
      font-size: 0.8rem;
      padding: 2px 8px;
      border-radius: 6px;
    }

    /* SVG 仪器容器 */
    .glassware-row {
      display: flex;
      gap: 20px;
      align-items: flex-end;
      height: 220px; /* 固定高度确保对齐 */
    }

    /* 仪器 Wrapper */
    .flask-wrapper, .tube-wrapper {
      position: relative;
      cursor: pointer;
      transition: transform 0.1s;
    }

    .flask-wrapper:active, .tube-wrapper:active {
      transform: scale(0.96);
    }

    /* 交互热区 (不可见，但可点击) */
    .hotspot {
      opacity: 0;
      cursor: pointer;
      fill: #fff; 
    }
    .hotspot:hover {
      opacity: 0.2; /* 鼠标悬停微亮 */
    }

    /* 液体颜色 (SVG Gradients) - 动态类 */
    /* 橙色 */
    .stop-orange { stop-color: var(--c-orange); transition: stop-color 0.5s; }
    .stop-orange-d { stop-color: var(--c-orange-d); transition: stop-color 0.5s; }
    
    /* 强灰绿 */
    .stop-green-s { stop-color: var(--c-green-strong-top); }
    .stop-green-s-d { stop-color: var(--c-green-strong-bottom); }
    
    /* 弱灰绿 */
    .stop-green-w { stop-color: var(--c-green-weak-top); }
    .stop-green-w-d { stop-color: var(--c-green-weak-bottom); }

    /* 结果反馈 */
    .result-feedback {
      margin-top: 15px;
      padding: 10px;
      background: #f1f5f9;
      border-radius: 8px;
      width: 100%;
      text-align: center;
      font-size: 0.9rem;
      min-height: 60px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      color: var(--text-sub);
    }
    .result-feedback strong {
      color: var(--text-main);
      display: block;
      margin-bottom: 4px;
    }

    /* 重置按钮 */
    .btn-reset {
      margin-top: 40px;
      padding: 12px 40px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 50px;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
      transition: transform 0.1s, background 0.2s;
    }
    .btn-reset:active {
      transform: scale(0.95);
      background: #1d4ed8;
    }

    /* 鼠标变成移液管 */
    body.mode-pipette {
      cursor: crosshair; 
    }
    body.mode-pipette .flask-wrapper,
    body.mode-pipette .tube-wrapper {
       cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%232563eb' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M12 2v20M5 9l7 7 7-7'/%3E%3C/svg%3E") 12 24, crosshair;
    }

    /* 响应式适配 */
    @media (max-width: 768px) {
      .lab-bench {
        grid-template-columns: 1fr;
        padding: 20px;
        gap: 40px;
      }
      .glassware-row {
        justify-content: center;
      }
      h1 { font-size: 1.25rem; }
    }
  </style>
</head>
<body>

  <header>
    <h1>酵母菌呼吸产物检测</h1>
    <div id="statusBar" class="status-bar">点击锥形瓶吸取滤液</div>
  </header>

  <main class="lab-bench">
    
    <div class="group">
      <div class="group-title"><span class="badge">A</span> 有氧呼吸组</div>
      
      <div class="glassware-row">
        <div class="flask-wrapper" title="有氧培养液">
          <svg width="100" height="150" viewBox="0 0 100 150">
            <defs>
              <linearGradient id="liquid-clear" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#ffffff" stop-opacity="0.8"/>
                <stop offset="100%" stop-color="#e2e8f0" stop-opacity="0.9"/>
              </linearGradient>
              <clipPath id="clip-flask-a">
                <path d="M35,10 L65,10 L65,50 L90,135 Q95,145 80,145 L20,145 Q5,145 10,135 L35,50 Z" />
              </clipPath>
            </defs>
            
            <g clip-path="url(#clip-flask-a)">
              <rect x="0" y="60" width="100" height="90" fill="url(#liquid-clear)" />
              <rect class="hotspot" onclick="pick('a-top')" x="0" y="60" width="100" height="40" ><title>吸取上层清液</title></rect>
              <rect class="hotspot" onclick="pick('a-bottom')" x="0" y="100" width="100" height="50" ><title>吸取底部沉淀</title></rect>
            </g>

            <path d="M35,10 L65,10 L65,50 L90,135 Q95,145 80,145 L20,145 Q5,145 10,135 L35,50 Z" 
                  fill="none" stroke="rgba(0,0,0,0.2)" stroke-width="2" />
            <path d="M38,55 L20,130" stroke="rgba(255,255,255,0.6)" stroke-width="3" stroke-linecap="round" fill="none"/>
          </svg>
        </div>

        <div class="tube-wrapper" onclick="drop('tube-a', 'result-a')" title="点击加入">
          <svg width="60" height="150" viewBox="0 0 60 150">
            <defs>
              <linearGradient id="grad-tube-a" x1="0" y1="0" x2="0" y2="1">
                <stop class="stop-orange" offset="0%"/>
                <stop class="stop-orange-d" offset="100%"/>
              </linearGradient>
              <clipPath id="clip-tube-a">
                <path d="M15,20 L45,20 L45,130 Q45,145 30,145 Q15,145 15,130 Z" />
              </clipPath>
            </defs>

            <g clip-path="url(#clip-tube-a)">
              <rect id="liquid-a" x="0" y="100" width="60" height="50" fill="url(#grad-tube-a)" />
            </g>

            <path d="M15,20 L45,20 L45,130 Q45,145 30,145 Q15,145 15,130 Z" 
                  fill="rgba(255,255,255,0.2)" stroke="rgba(0,0,0,0.2)" stroke-width="2" />
            <path d="M20,30 L20,130" stroke="rgba(255,255,255,0.5)" stroke-width="2" stroke-linecap="round" fill="none"/>
          </svg>
        </div>
      </div>

      <div class="result-feedback" id="result-a">
        重铬酸钾溶液<br>待加入...
      </div>
    </div>

    <div class="group">
      <div class="group-title"><span class="badge">B</span> 无氧呼吸组</div>
      
      <div class="glassware-row">
        <div class="flask-wrapper">
          <svg width="100" height="150" viewBox="0 0 100 150">
            <defs>
              <clipPath id="clip-flask-b">
                <path d="M35,10 L65,10 L65,50 L90,135 Q95,145 80,145 L20,145 Q5,145 10,135 L35,50 Z" />
              </clipPath>
            </defs>
            
            <g clip-path="url(#clip-flask-b)">
              <rect x="0" y="60" width="100" height="90" fill="url(#liquid-clear)" />
              <rect class="hotspot" onclick="pick('b-all')" x="0" y="60" width="100" height="90" ><title>吸取培养液</title></rect>
            </g>

            <path d="M35,10 L65,10 L65,50 L90,135 Q95,145 80,145 L20,145 Q5,145 10,135 L35,50 Z" 
                  fill="none" stroke="rgba(0,0,0,0.2)" stroke-width="2" />
            <path d="M38,55 L20,130" stroke="rgba(255,255,255,0.6)" stroke-width="3" stroke-linecap="round" fill="none"/>
            
            </svg>
        </div>

        <div class="tube-wrapper" onclick="drop('tube-b', 'result-b')" title="点击加入">
          <svg width="60" height="150" viewBox="0 0 60 150">
            <defs>
              <linearGradient id="grad-tube-b" x1="0" y1="0" x2="0" y2="1">
                <stop class="stop-orange" offset="0%"/>
                <stop class="stop-orange-d" offset="100%"/>
              </linearGradient>
              <clipPath id="clip-tube-b">
                <path d="M15,20 L45,20 L45,130 Q45,145 30,145 Q15,145 15,130 Z" />
              </clipPath>
            </defs>

            <g clip-path="url(#clip-tube-b)">
              <rect id="liquid-b" x="0" y="100" width="60" height="50" fill="url(#grad-tube-b)" />
            </g>

            <path d="M15,20 L45,20 L45,130 Q45,145 30,145 Q15,145 15,130 Z" 
                  fill="rgba(255,255,255,0.2)" stroke="rgba(0,0,0,0.2)" stroke-width="2" />
            <path d="M20,30 L20,130" stroke="rgba(255,255,255,0.5)" stroke-width="2" stroke-linecap="round" fill="none"/>
          </svg>
        </div>
      </div>

      <div class="result-feedback" id="result-b">
        重铬酸钾溶液<br>待加入...
      </div>
    </div>

  </main>

  <button class="btn-reset" onclick="resetAll()">重置实验</button>

  <script>
    // 全局状态
    let currentPipette = null; // 存储当前吸取的内容: 'a-top', 'a-bottom', 'b-all'
    const statusEl = document.getElementById('statusBar');
    const bodyEl = document.body;

    // 1. 吸取操作
    function pick(type) {
      currentPipette = type;
      
      // 视觉反馈
      bodyEl.classList.add('mode-pipette');
      statusEl.classList.add('active');
      
      let msg = "";
      if(type === 'a-top') msg = "已吸取：A瓶上层清液";
      else if(type === 'a-bottom') msg = "已吸取：A瓶底层沉淀";
      else if(type === 'b-all') msg = "已吸取：B瓶培养液";
      
      statusEl.innerText = `${msg} -> 请点击试管滴加`;
    }

    // 2. 滴加操作
    function drop(tubeId, resultId) {
      // 如果还没吸取
      if (!currentPipette) {
        statusEl.classList.add('shake');
        setTimeout(() => statusEl.classList.remove('shake'), 400);
        statusEl.innerText = "请先点击锥形瓶吸取液体！";
        return;
      }

      const stops = document.querySelectorAll(`#grad-${tubeId} stop`);
      const resultBox = document.getElementById(resultId);
      const liquidRect = document.getElementById(tubeId === 'tube-a' ? 'liquid-a' : 'liquid-b');

      // 移除旧颜色类
      stops.forEach(s => s.className.baseVal = "");

      // 根据吸取内容判断结果
      if (currentPipette === 'b-all') {
        // 无氧：强灰绿色
        stops[0].classList.add('stop-green-s');
        stops[1].classList.add('stop-green-s-d');
        // 去除原因解释
        resultBox.innerHTML = "<strong>明显灰绿色</strong>";
      } else if (currentPipette === 'a-top') {
        // 有氧上层：无反应
        stops[0].classList.add('stop-orange');
        stops[1].classList.add('stop-orange-d');
        resultBox.innerHTML = "<strong>橙色</strong>";
      } else if (currentPipette === 'a-bottom') {
        // 有氧底层：弱灰绿色
        stops[0].classList.add('stop-green-w');
        stops[1].classList.add('stop-green-w-d');
        // 去除原因解释
        resultBox.innerHTML = "<strong>浅灰绿色</strong>";
      }

      // 液面上升动画
      liquidRect.setAttribute('y', '80');
      setTimeout(() => liquidRect.setAttribute('y', '90'), 300);

      // 重置状态
      currentPipette = null;
      bodyEl.classList.remove('mode-pipette');
      statusEl.classList.remove('active');
      statusEl.innerText = "操作完成。可继续实验。";
    }

    // 3. 重置
    function resetAll() {
      // 恢复颜色
      ['grad-tube-a', 'grad-tube-b'].forEach(id => {
        const stops = document.querySelectorAll(`#${id} stop`);
        stops.forEach(s => s.className.baseVal = "");
        stops[0].classList.add('stop-orange');
        stops[1].classList.add('stop-orange-d');
      });

      // 恢复液面
      document.getElementById('liquid-a').setAttribute('y', '100');
      document.getElementById('liquid-b').setAttribute('y', '100');

      // 恢复文字
      document.getElementById('result-a').innerHTML = "重铬酸钾溶液<br>待加入...";
      document.getElementById('result-b').innerHTML = "重铬酸钾溶液<br>待加入...";

      // 恢复状态
      currentPipette = null;
      bodyEl.classList.remove('mode-pipette');
      statusEl.classList.remove('active');
      statusEl.innerText = "点击锥形瓶吸取滤液";
    }
  </script>
</body>
</html>
